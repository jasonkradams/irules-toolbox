# Create an F5 iRule that provides a custom response when all pool members are down. The iRule should check if the specified pool has any active members, and if not, send the message "down" to a server in pool "Notification_Server" using TCP
# Please be aware that this could send a considerable number of messages per second, as there is no rate limit functionality implemented, and HSL is highly efficent

when CLIENT_ACCEPTED priority 500 {
    # Check if there are any active members in the specified pool
    # If all pool members are down (active count is 0)
    if { [active_members yourpoolname] == 0 } {
        # Open HSL Connection
        set hsl [HSL::open -proto TCP -pool Notification_Server]
        HSL::send $hsl "down"
    }
}
